<!DOCTYPE html>
<html>
<head>
    <title></title>
    <script src="src/codem/lib/codemirror.js"></script>
    <script src="src/editor/lib/jshint.js"></script>
    <script src="src/codem/mode/javascript/javascript.js"></script>
    <script src="src/codem/addon/hint/show-hint.js"></script>
    <script src="src/codem/addon/selection/active-line.js"></script>
    <script src="src/codem/addon/hint/javascript-hint.js"></script>
    <script src="src/codem/addon/edit/matchbrackets.js"></script>
    <script src="src/codem/addon/fold/foldcode.js"></script>
    <script src="src/codem/addon/fold/foldgutter.js"></script>
    <script src="src/codem/addon/fold/indent-fold.js"></script>
    <script src="src/codem/addon/fold/brace-fold.js"></script>
    <script src="src/codem/addon/scroll/simplescrollbars.js"></script>
    <script src="src/codem/addon/lint/lint.js"></script>
    <script src="src/codem/addon/lint/javascript-lint.js"></script>
    <link rel="stylesheet" href="src/codem/lib/codemirror.css">
    <link rel="stylesheet" href="src/codem/addon/hint/show-hint.css">
    <link rel="stylesheet" href="src/codem/addon/lint/lint.css">
    <link rel="stylesheet" href="src/codem/theme/dracula.css">
    <link rel="stylesheet" href="src/codem/addon/fold/foldgutter.css" />
    <link rel="stylesheet" href="src/codem/addon/scroll/simplescrollbars.css" />
    <link href="https://cdn.jsdelivr.net/npm/@mdi/font@5.x/css/materialdesignicons.min.css" rel="stylesheet">
    <link href="src/editor/lib/vuetify.min.css" rel="stylesheet">
    <link rel="stylesheet" href="src/editor/editor.css">
</head>
<body>
  
  <div id="lm_container" class="lm-ui">
    <div id="lm_editor_folder" class="lm-ui-col lm-ui-folder">
      <div id="lm_folder">
        <ul class="tree-list">
          <tree-item
            v-if="treeData"
            class="tree-item"
            :item="treeData"
            :path="currentPath"
            @make-folder="makeFolder"
            @add-item="addItem"
            @update-code="updateCode"
            @update-current-path="updateCurrentPath"
          ></tree-item>
        </ul>
      </div>
    </div>
    <div id="lm_editor_resize1" class="lm-drag-bar"></div>
    <div id="lm_editor" class="lm-ui-col lm-ui-editor">
      <codemirror
        class="lm-editor"
        ref="cm"
        v-model="code"
        :options="cmOption"
        @blur="onCmBlur($event)"
        @focus="onCmFocus($event)"
        @ready="onCmReady($event)"
        @changes="onChange"
      ></codemirror>
    </div>
    <div id="lm_editor_resize2" class="lm-drag-bar"></div>
    <div id="lm_editor_result" class="lm-ui-col lm-ui-result">
      <div class="lm_result_progress" v-if="loadingResult">
        <v-progress-linear
          indeterminate
          color="#1867c0"
        ></v-progress-linear>
      </div>  
      <!-- <i class="lm-ui-result-loading mdi mdi-reload" v-if="loadingResult"></i> -->
      <codemirror
        class="lm-editor"
        ref="res_cm"
        v-model="jsonCode"
        :options="cmResultOption"
      ></codemirror>
    </div>
  </div>
  <script src="src/editor/lib/jquery-3.5.1.min.js" crossorigin="anonymous"></script>
  <script src="src/editor/lib/vue.js"></script>
  <script src="src/editor/lib/vuetify.js"></script>
  <script src="src/editor/lib/vue-codemirror.js"></script>
  <script type="text/x-template" id="item-template">
    <li>
      <div
        class="item-wrap"
        :class="{'is-file': !isFolder, active: path === item.path}"
        @click="toggle"
        @dblclick="makeFolder">
        <template v-if="isFolder">
          <i v-if="isOpen" class="mdi mdi-menu-down"></i>
          <i v-else class="mdi mdi-menu-right"></i>
          <i v-if="isOpen" class="mdi mdi-folder-open"></i>
          <i v-else class="mdi mdi-folder"></i>
        </template>
        <template v-else>
          <i v-if="item.extension === '.js'" class="mdi mdi-nodejs"></i>
          <i v-else-if="item.extension === '.json'" class="mdi mdi-code-json"></i>
          <i v-else class="mdi mdi-file-document-outline"></i>
        </template>
        <span class="item-text">{{item.name}}</span>
      </div>
      <ul class="item-folder-list" v-show="isOpen" v-if="isFolder">
        <tree-item
          class="tree-item"
          v-for="(child, index) in item.children"
          :key="index"
          :item="child"
          :path="path"
          @make-folder="$emit('make-folder', $event)"
          @add-item="$emit('add-item', $event)"
          @update-code="$emit('update-code', $event)"
          @update-current-path="$emit('update-current-path', $event)"
        ></tree-item>
        <li class="mdi mdi-plus-circle" @click="$emit('add-item', item)"></li>
      </ul>
    </li>
  </script>
  <script>
    const __PORT__ = "<%= PORT %>"
  </script>
  <script src="src/editor/lib/utils.js"></script>
  <script src="src/editor/lib/mock-snippets.js"></script>
  <script src="src/editor/editor.js"></script>
</body>
</html>